
```java
import java.io.BufferedReader;  
import java.io.BufferedWriter;  
import java.io.InputStreamReader;  
import java.io.OutputStreamWriter;  
import java.util.ArrayList;  
import java.util.StringTokenizer;  
  
public class Main {  
  
    static BufferedReader br;  
    static BufferedWriter bw;  
    static StringTokenizer st;  
    static StringBuilder sb;  
    static int answer;  
    static char[] chars = {'B', 'W'};  
    static char[][] mat;  
    static int m;  
    static int n;  
    static int min;  
    static int currentCount;  
    static char[][] tmp;  
    static boolean changed;  
  
        public static void main(String[] args) throws Exception {  
  
            br = new BufferedReader(new InputStreamReader(System.in));  
            bw = new BufferedWriter(new OutputStreamWriter(System.out));  
            sb = new StringBuilder();  
            st = new StringTokenizer(br.readLine());  
  
            n = Integer.parseInt(st.nextToken());  
            m = Integer.parseInt(st.nextToken());  
            mat = new char[n][m];  
            for (int i=0; i<n; i++) {  
                mat[i] = br.readLine().toCharArray();  
            }  
  
            tmp = new char[8][8];  
            min = Integer.MAX_VALUE;  
  
            for (int i=0; i<=n-8; i++) {  
                for (int j=0; j<=m-8; j++) {  
                    for (int k=0; k<2; k++) {  
                        int result = calculateNumbers (chars[k], i, j);  
                        if (result < min) min = result;  
                    }  
                }  
            }  
  
            sb.append(min);  
            bw.write(sb.toString());  
            bw.close();  
        }  
  
        public static int calculateNumbers (char first, int x, int y) {  
            currentCount = 0;  
            changed = false;  
            int blocksNeeded = 0;  
  
            // init charCount  
            int charCount = 0;  
            if (first == chars[1]) charCount++;  
  
            // copy matrix  
            for (int i=0; i<8; i++) {  
                for (int j=0; j<8; j++){  
                    tmp[i][j] = mat[x+i][y+j];  
                }  
            }  
  
            for (int i=0; i<8; i++) {  
                // we need to change first element  
                if (i > 0 && (tmp[i][0] == tmp[i-1][0])) {  
                    tmp[i][0] = chars[(charCount)%2];  
                    currentCount++;  
                }  
                blocksNeeded += calculateNumbersOfLines(chars[(charCount++)%2], i);  
            }  
            return blocksNeeded;  
        }  
  
        public static int calculateNumbersOfLines (char first, int x) {  
            int charCount = 0;  
            int blocksNeeded = 0;  
            if (first == chars[1]) charCount++;  
  
            for (int i=1; i<8; i++) {  
                if (chars[(charCount%2)] == tmp[x][i]) {  
                    tmp[x][i] = chars[(charCount+1)%2];  
                    blocksNeeded++;  
                    // paint 를 하면서 가야되네...  
                }  
                charCount++;  
            }  
            return blocksNeeded;  
        }  
    }
```

나중에 다시 봐야지.

#### 2차시도

```java
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.util.StringTokenizer;

public class Main {

    static BufferedReader br;
    static BufferedWriter bw;
    static StringTokenizer st;
    static StringBuilder sb;
    static int answer;
    static char[] chars = {'B', 'W'};
    static char[][] mat;
    static int m;
    static int n;
    static int min;
    static char[][] tmp;
    static boolean changed;

    public static void main(String[] args) throws Exception {

        br = new BufferedReader(new InputStreamReader(System.in));
        bw = new BufferedWriter(new OutputStreamWriter(System.out));
        sb = new StringBuilder();
        st = new StringTokenizer(br.readLine());

        n = Integer.parseInt(st.nextToken());
        m = Integer.parseInt(st.nextToken());
        mat = new char[n][m];
        for (int i=0; i<n; i++) {
            mat[i] = br.readLine().toCharArray();
        }

        tmp = new char[8][8];
        min = Integer.MAX_VALUE;

        for (int i=0; i<=n-8; i++) {
            for (int j=0; j<=m-8; j++) {
                for (int k=0; k<2; k++) {
                    int result = calculateNumbers (chars[k], i, j);
                    if (result < min) {
                        min = result;
                    }
                }
            }
        }

        sb.append(min);
        bw.write(sb.toString());
        bw.close();
    }

    public static int calculateNumbers (char first, int x, int y) {
        int blocksNeeded = 0;

        // init charCount
        int charCount = 0;
        if (first == chars[1]) charCount++;

        // copy matrix
        for (int i=0; i<8; i++) {
            for (int j=0; j<8; j++){
                tmp[i][j] = mat[x+i][y+j];
            }
        }

        for (int i=0; i<8; i++) {
            // we need to change first element
            if (i > 0 && (tmp[i][0] == tmp[i-1][0])) {
                tmp[i][0] = chars[(charCount)%2];
                blocksNeeded++;
            }
            blocksNeeded += calculateNumbersOfLines(chars[(charCount++)%2], i);
        }
        return blocksNeeded;
    }

    public static int calculateNumbersOfLines (char first, int x) {
        int charCount = 0;
        int blocksNeeded = 0;
        if (first == chars[1]) charCount++;

        for (int i=1; i<8; i++) {
            if (chars[(charCount%2)] == tmp[x][i]) {
                tmp[x][i] = chars[(charCount+1)%2];
                blocksNeeded++;
            }
            charCount++;
        }
        return blocksNeeded;
    }
}

```

이번엔 예제는 맞는데 제출시 바로 틀린다. 환장할 노릇.

이번에는, 어차피 8x8 블록이니까, 2x2 블록을 선언해서 이걸 반복시키면 되지 않을까 생각.
왜냐하면 패턴은, 왼쪽위에서부터 시작해서
'B' 'W'
'W' 'B'  

또는
'W' 'B'
'B' 'W' 

이기 떄문이다.  (가로 2개 또는 세로 2개만 하려면 번갈아가면서 해야 하므로 복잡해짐)


```java
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.util.StringTokenizer;

public class Main {

    static BufferedReader br;
    static BufferedWriter bw;
    static StringTokenizer st;
    static StringBuilder sb;
    static char[][] mat;
    static int m;
    static int n;
    static int min;
    static char[][] tmp;
    static char[][] blackBlock = { {'B', 'W'}, {'W', 'B'} };
    static char[][] whiteBlock = { {'W', 'B'}, {'B', 'W'} };

    public static void main(String[] args) throws Exception {

        br = new BufferedReader(new InputStreamReader(System.in));
        bw = new BufferedWriter(new OutputStreamWriter(System.out));
        sb = new StringBuilder();
        st = new StringTokenizer(br.readLine());

        n = Integer.parseInt(st.nextToken());
        m = Integer.parseInt(st.nextToken());
        mat = new char[n][m];
        for (int i=0; i<n; i++) {
            mat[i] = br.readLine().toCharArray();
        }

        tmp = new char[8][8];
        min = Integer.MAX_VALUE;

        for (int i=0; i<=n-8; i++) {
            for (int j=0; j<=m-8; j++) {
                min = Math.min (Math.min(calculateUsingBlock(whiteBlock, i, j), calculateUsingBlock(blackBlock, i, j)), min);
            }
        }

        sb.append(min);
        bw.write(sb.toString());
        bw.close();
        // System.out.println(min);
    }

    public static int calculateUsingBlock (char[][] block, int x, int y) {
        int count = 0;

        for (int i=0; i<8; i++) {
            for (int j=0; j<8; j++) {
                tmp[i][j] = mat[x+i][y+j];
            }
        }

        for (int i=0; i<8; i += 2){
            for (int j=0; j<8; j += 2){
                for (int k=0; k<2; k++) {
                    for (int l=0; l<2; l++) {
                        if (block[k][l] != tmp[i+k][j+l]) count++;
                    }
                }
            }
        }

        return count;
    }
}

```

간단하게 생각하니까 훨씬 간단히 문제를 풀 수 있었다.
반복은 패턴을 생각하는게 좋을 것 같다.
