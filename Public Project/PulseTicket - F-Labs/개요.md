
### Ticketing System 프로젝트 개요

짧은 시간 내에 수많은 사람들이 동시에 티켓 예매 버튼을 누르는 상황을 가정한 API 서버. 캐싱 성능, 캐싱 알고리즘, 캐싱 스탬피드 논문의 효율성 입증, 그리고 동시성 제어까지 실험할 수 있는 프로젝트​

#### 기술 스택

**백엔드**

- Spring Boot: REST API 구현 및 비즈니스 로직
    
- Supabase (PostgreSQL 기반): 데이터베이스 및 인증 관리
    
    - PostgreSQL: 잔여 좌석 조회, 좌석 선택 검증, 예약 데이터 저장
        
    - 내장 인증(GoTrue): 사용자 인증 처리
        
    - 실시간 기능(Realtime): 좌석 상태 변화 실시간 동기화
        

**캐싱 및 대기열**

- Redis: 잔여 좌석 수, 대기열 순번, 좌석 배치도 캐싱
    

**인프라 및 모니터링**

- Docker Compose: 전체 로컬 개발 환경 구성 및 관리
    
    - Spring Boot 컨테이너
        
    - Redis 컨테이너
        
    - Supabase 컨테이너 스택 (PostgreSQL, GoTrue, Realtime, PostgREST 등)
        
- Prometheus + Grafana: 시스템 메트릭 모니터링 (CPU, 메모리, 응답시간 등)
    
- Jaeger/Pinpoint: 분산 추적으로 캐싱 스탐피드 병목 분석
    

**성능 부하 테스트**

- k6 또는 Apache JMeter: 다중 동시 접속 시뮬레이션
    

#### 캐싱 스탬피드 적용 지점

Redis 사용 부분에서 발생 예상:

- 잔여 좌석 수 조회

- 예매
    
- 대기열 순번 조회
    
- 좌석 배치도 조회
    

#### 주요 기능

**기본 티켓팅 시스템**

- 좌석 조회 및 상태 확인
    
- 좌석 예약 (트랜잭션 처리)
    
- 예약 취소 및 시간 만료 처리
    

**성능 최적화**

- Redis 캐싱으로 데이터베이스 부하 감소
    
- 캐싱 스탬피드 방지 (XFetch, Locking 등 여러 알고리즘 테스트)
    
- LRU, LFU, FIFO 등 캐싱 알고리즘 성능 비교
    

**모니터링 및 분석**

- 실시간 성능 지표 수집 및 시각화
    
- 병목 지점 추적 및 성능 병목 분석
    
- 캐싱 효율성 측정
    

#### 개발 도구

- IntelliJ IDEA + Cursor: IDE, PostgreSQL MCP, serena MCP
    
- Docker + Docker Compose: 컨테이너 환경
    
- PostgreSQL (Supabase): 데이터베이스
    
- Git + GitHub: 버전 관리
    

#### 마일스톤

1. **기본 API 설계**: 필요한 엔드포인트 및 데이터 모델 정의
    
2. **데이터베이스 설계**: Supabase 스키마 구성, 테이블 설계
    
3. **Docker Compose 구성**: Spring Boot, Redis, Supabase 통합
    
4. **REST API 구현**: Spring Boot 기본 기능 구현
    
5. **Redis 캐싱 통합**: 캐싱 로직 구현 및 동작 확인
    
6. **Prometheus + Grafana 설정**: 메트릭 수집 및 시각화
    
7. **성능 부하 테스트**: k6/JMeter로 부하 테스트 실행
    
8. **캐싱 스탐피드 재현**: 캐시 만료 시점에 다중 요청 유발
    
9. **캐싱 알고리즘 비교**: 여러 알고리즘 성능 측정 및 분석
   (LRU, LFU, FIFO, Xfetch, Locking 등)
    
10. **분산 추적 설정**: Jaeger/Pinpoint로 상세 분석
    
11. **최적화 및 튜닝**: 결과 기반 시스템 최적화
    
12. **문서화 및 결론**: 실험 결과 정리 및 GitHub 업로드
    

일단 시작은 작게, 나중에 기능이나 스펙, 컨셉을 늘리는 방향으로..
캐싱피드 논문 수식 정리 필요..


### Spring Components
#### Spring Web

##### 역할
HTTP 요청을 받아서 처리하는 REST API 서버를 만드는 핵심 프레임워크입니다.

##### 가능한 것
- `@RestController`: 클래스를 REST API 컨트롤러로 지정, 자동으로 JSON 응답 변환 
- `@GetMapping`, `@PostMapping`, `@PutMapping`, `@DeleteMapping`: HTTP 메서드별 엔드포인트 정의
- `@RequestBody`: 요청 본문을 Java 객체로 자동 변환
- `@PathVariable`: URL 경로에서 변수 추출 (예: `/api/seats/{seatId}`)
- `@RequestParam`: 쿼리 파라미터 추출 (예: `?userId=123`)
- 내장 Tomcat 서버로 별도 서버 설치 없이 실행 가능
    

##### 티켓팅 시스템 예시
잔여 좌석 조회 API, 좌석 예약 API, 대기열 순번 조회 API 등을 간단하게 구현합니다.

---

#### Spring Data JPA

##### 역할
데이터베이스와 Java 객체를 매핑(ORM)하고, SQL 작성 없이 데이터를 CRUD할 수 있게 해주는 추상화 레이어입니다.

##### 가능한 것
- Repository 인터페이스만 선언하면 기본 CRUD 메서드 자동 제공: `save()`, `findById()`, `findAll()`, `delete()`
- 메서드 이름으로 쿼리 자동 생성: `findByUserId()`, `findByStatusAndCreatedAtBefore()`
- `@Query` 어노테이션으로 복잡한 JPQL/SQL 작성 가능
- `@Entity`, `@Table`, `@Column`으로 Java 클래스와 DB 테이블 매핑
- Pageable, Sort로 페이징과 정렬 자동 처리
- 트랜잭션 관리 자동화 (`@Transactional`)
    

##### 티켓팅 시스템 예시
예약 정보 저장, 만료된 예약 찾기(`findByExpiresAtBefore`), 사용자별 예약 조회 등을 SQL 없이 처리합니다.

---

#### PostgreSQL Driver

##### 역할
Java 애플리케이션과 PostgreSQL 데이터베이스 간의 통신을 담당하는 JDBC 드라이버입니다.

##### 가능한 것
- Spring Data JPA가 생성한 SQL을 실제 PostgreSQL 서버로 전송
- 데이터베이스 연결 풀 관리
- 트랜잭션 처리를 위한 저수준 통신
- application.yml에서 DB 연결 설정만 하면 자동 연결
    
##### 필수 이유
이 드라이버가 없으면 PostgreSQL과 통신 불가능합니다. Spring Data JPA가 작동하려면 반드시 필요합니다.

---

#### Spring Data Redis
##### 역할
Redis와 통합하여 캐싱, 세션 저장, 대기열 등을 구현하는 프레임워크입니다.

##### 가능한 것
- `@Cacheable`: 메서드 결과를 자동으로 Redis에 캐싱
- `@CacheEvict`: 캐시 삭제
- `@CachePut`: 캐시 강제 업데이트
- TTL(Time-To-Live) 설정으로 캐시 자동 만료
- RedisTemplate: String, List, Set, Sorted Set, Hash 등 Redis 데이터 구조 직접 조작
- Pub/Sub 메시징 지원
    

##### 티켓팅 시스템 예시

- 잔여 좌석 수를 Redis에 캐싱하여 DB 부하 감소
- Sorted Set으로 대기열 순번 관리
- 좌석 배치도를 5분간 캐싱 후 자동 만료
- 캐싱 스탬피드 시나리오 구현 및 테스트
    
---

#### Lombok
##### 역할
반복적인 코드(getter, setter, 생성자 등)를 컴파일 시점에 자동 생성해주는 라이브러리입니다.

##### 가능한 것

- `@Getter`, `@Setter`: getter/setter 메서드 자동 생성
- `@NoArgsConstructor`: 파라미터 없는 기본 생성자 생성 (JPA Entity 필수)
- `@AllArgsConstructor`: 모든 필드를 포함하는 생성자 생성
- `@Builder`: 빌더 패턴 자동 구현으로 객체 생성 가독성 향상
- `@Slf4j`: Logger 객체 자동 생성 (`log.info()`, `log.error()` 사용 가능)
- `@Data`: `@Getter`, `@Setter`, `@ToString`, `@EqualsAndHashCode`를 한번에
    

##### 티켓팅 시스템 예시
```java
@Entity @Getter @Builder
public class Reservation {
    private Long id;
    private String userId;
    private String seatId;
    private LocalDateTime expiresAt;
}
```

위 코드로 getter, builder 패턴 모두 자동 생성됩니다.

---

#### Spring Boot DevTools

##### 역할
개발 중 생산성을 높이는 자동화 도구입니다.

##### 가능한 것
- 자동 재시작: `.java` 파일 수정 후 저장하면 애플리케이션 자동 재시작
- LiveReload: HTML, CSS 수정 시 브라우저 자동 새로고침
- 개발 최적화 설정: 캐싱 비활성화로 즉시 변경사항 반영
- 원격 디버깅: 원격 서버의 애플리케이션 디버깅 지원

##### 생산성 향상 효과
Redis 캐싱 로직 수정 → 저장 → 3초 내 자동 재시작 → 즉시 테스트. 수동 재시작 불필요로 개발 속도 2~3배 향상됩니다.

##### 주의
프로덕션 환경에는 자동으로 비활성화됩니다.

---
