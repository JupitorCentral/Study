- [ ] Database Indexing: RDBMS, NoSQL, and Redis β• 2025-08-19 

### ||Q|| : Asking about the structure of RDBMS B-tree index nodes

μ¤μΌ€μ΄. λ‚ RDBMS, noSQL, Redis μ—μ„ κµ¬μ²΄μ μΌλ΅ μΈλ±μ¤κ°€ μ–΄λ–»κ² λ™μ‘ν•λ”μ§€ μ§κ³ λ„μ–΄κ°€λ ¤κ³  ν•΄. λ¨Όμ € RDBMS λ¶€ν„°. index λΌλ” λ³„λ„μ μλ£κµ¬μ΅°λ¥Ό b tree (λλ” b + tree) λ¥Ό μ΄μ©ν•΄μ„ λ…Έλ“λ¥Ό κµ¬μ„±ν•λ”λ°, κ·Έ λ…Έλ“μ—λ” μ •λ ¬λ λ μ½”λ“μ λ¶€λ¶„ - κ·Έλ¬λ‹κΉ ν΄λ¬μ¤ν„°λ§ λ λ μ½”λ“μ μ²«λ²μ§Έλ¥Ό κ°€λ¦¬ν‚¤λ” μ£Όμ†κ°€ λ‹΄κ²¨μλ”κ² λ§μ„κΉ?

---

### ||A|| : Correcting the understanding of B-tree index node pointers

λ„¤, κΈ°λ³Έμ μΈ μ΄ν•΄λ” λ§μ§€λ§ λ‡ κ°€μ§€ μ¤‘μ”ν• μ •μ •μ΄ ν•„μ”ν•©λ‹λ‹¤.

#### RDBMS B-tree Index λ…Έλ“ κµ¬μ΅° (Node Structure)

B-treeμ κ° λ…Έλ“λ” λ‹¤μμ„ ν¬ν•¨ν•©λ‹λ‹¤:

- **Search-key values**: Kβ‚, Kβ‚‚, ..., Kβ‚™β‚‹β‚ (μ •λ ¬λ μƒνƒ)
    
- **Pointers**: Pβ‚, Pβ‚‚, ..., Pβ‚™
    

#### Leaf Node vs Non-leaf Node μ°¨μ΄

1. **Leaf Nodes (λ¦¬ν”„ λ…Έλ“)**:
    
    - Pointer PαµΆλ” search-key value KαµΆλ¥Ό κ°€μ§„ **μ‹¤μ  λ μ½”λ“λ¥Ό κ°€λ¦¬ν‚΄**
        
    - μ¦‰, κ°λ³„ λ μ½”λ“μ μ£Όμ†λ¥Ό μ €μ¥ν•©λ‹λ‹¤.
        
2. **Non-leaf Nodes (λ‚΄λ¶€ λ…Έλ“)**:
    
    - Pointer PαµΆλ” **λ‹¤λ¥Έ B-tree λ…Έλ“λ¥Ό κ°€λ¦¬ν‚΄**
        
    - λ μ½”λ“κ°€ μ•„λ‹ ν•μ„ λ…Έλ“μ μ£Όμ†λ¥Ό μ €μ¥ν•©λ‹λ‹¤.
        

#### μ‚¬μ©μ μ§λ¬Έμ— λ€ν• λ‹µλ³€

β "ν΄λ¬μ¤ν„°λ§λ λ μ½”λ“μ μ²«λ²μ§Έλ¥Ό κ°€λ¦¬ν‚¤λ” μ£Όμ†" β†’ μ΄ μ„¤λ…μ€ **λ¶€μ •ν™•ν•©λ‹λ‹¤.**

β… μ‹¤μ λ΅λ”:

- Clustering Indexμ—μ„λ„ κ° ν¬μΈν„°λ” ν•΄λ‹Ή search-key valueλ¥Ό κ°€μ§„ **κ°λ³„ λ μ½”λ“λ¥Ό κ°€λ¦¬ν‚µλ‹λ‹¤.**
    
- "ν΄λ¬μ¤ν„°λ§λ κ·Έλ£Ήμ μ²« λ²μ§Έ"κ°€ μ•„λ‹λΌ **"μ •ν™•ν μΌμΉν•λ” λ μ½”λ“"**λ¥Ό κ°€λ¦¬ν‚µλ‹λ‹¤.
    

#### Clustering Index λ™μ‘ λ°©μ‹

- **Equality on Non-keyμΈ κ²½μ°**:
    
    - λ™μΌν• search-key valueλ¥Ό κ°€μ§„ μ—¬λ¬ λ μ½”λ“κ°€ μ—°μ†μ μΌλ΅ μ €μ¥λ  μ μμµλ‹λ‹¤.
        
    - ν•μ§€λ§ μΈλ±μ¤ μ—”νΈλ¦¬λ” μ—¬μ „ν **κ°κ°μ λ μ½”λ“**λ¥Ό κ°€λ¦¬ν‚µλ‹λ‹¤.
        

#### μμ‹λ΅ μ„¤λ…

Plaintext

```
B-tree Leaf Node:
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ Kβ‚=10 β”‚ Pβ‚ β”‚ Kβ‚‚=20 β”‚ Pβ‚‚ β”‚ Kβ‚ƒ=30 β”‚ Pβ‚ƒ β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

- **Pβ‚**: search-key valueκ°€ 10μΈ **νΉμ • λ μ½”λ“** μ£Όμ†
    
- **Pβ‚‚**: search-key valueκ°€ 20μΈ **νΉμ • λ μ½”λ“** μ£Όμ†
    
- **Pβ‚ƒ**: search-key valueκ°€ 30μΈ **νΉμ • λ μ½”λ“** μ£Όμ†
    

#### μ”μ•½

B-tree μΈλ±μ¤ λ…Έλ“λ” **"ν΄λ¬μ¤ν„°λ§λ λ μ½”λ“ κ·Έλ£Ήμ μ‹μ‘μ "**μ΄ μ•„λ‹λΌ, **"κ° search-keyμ— λ€μ‘ν•λ” κ°λ³„ λ μ½”λ“μ μ •ν™•ν• μ„μΉ"**λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°λ“¤μ„ λ‹΄κ³  μμµλ‹λ‹¤.

---

### ||Q|| : Expressing confusion

μ μ΄ν•΄κ°€ μ•κ°€λ„¤ γ… 

---

### ||A|| : Providing a simplified explanation of B-tree index pointers

μ•„, μ κ°€ μ„¤λ…μ„ λ„λ¬΄ λ³µμ΅ν•κ² ν–λ„¤μ”! λ” κ°„λ‹¨ν•κ³  κµ¬μ²΄μ μΌλ΅ μ„¤λ…λ“λ¦΄κ²μ”.

#### RDBMS B-tree Indexμ μ‹¤μ  κµ¬μ΅°

π” ν•µμ‹¬ ν¬μΈνΈ: κ° ν¬μΈν„°λ” κ°λ³„ λ μ½”λ“λ¥Ό κ°€λ¦¬ν‚µλ‹λ‹¤.

μ‚¬μ©μλ‹μ΄ μƒκ°ν•μ‹  "ν΄λ¬μ¤ν„°λ§λ λ μ½”λ“μ μ²«λ²μ§Έλ¥Ό κ°€λ¦¬ν‚¤λ” μ£Όμ†"λ” μ •ν™•ν•μ§€ μ•μµλ‹λ‹¤.

#### π“– μ‹¤μ  λ™μ‘ λ°©μ‹

**B-tree Leaf Node κµ¬μ΅°:**

Plaintext

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ Keyβ‚ β”‚ Ptrβ‚ β”‚ Keyβ‚‚ β”‚ Ptrβ‚‚ β”‚ Keyβ‚ƒ β”‚ Ptrβ‚ƒ β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

- **Ptrβ‚**: Keyβ‚ κ°’μ„ κ°€μ§„ **νΉμ • λ μ½”λ“ ν•λ‚μ μ£Όμ†**
    
- **Ptrβ‚‚**: Keyβ‚‚ κ°’μ„ κ°€μ§„ **νΉμ • λ μ½”λ“ ν•λ‚μ μ£Όμ†**
    
- **Ptrβ‚ƒ**: Keyβ‚ƒ κ°’μ„ κ°€μ§„ **νΉμ • λ μ½”λ“ ν•λ‚μ μ£Όμ†**
    

#### πΆ κµ¬μ²΄μ μΈ μμ‹

Employee ν…μ΄λΈ”μ—μ„ salary μΈλ±μ¤:

Plaintext

```
Salary Index (B-tree leaf):
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ 30K β”‚β†’Rec#5 β”‚ 50K β”‚β†’Rec#2 β”‚ 70K β”‚β†’Rec#8 β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

κ° ν¬μΈν„°λ”:

- **30K** β†’ Employee#5 λ μ½”λ“ (μ •ν™•ν• ν•λ‚μ λ μ½”λ“)
    
- **50K** β†’ Employee#2 λ μ½”λ“ (μ •ν™•ν• ν•λ‚μ λ μ½”λ“)
    
- **70K** β†’ Employee#8 λ μ½”λ“ (μ •ν™•ν• ν•λ‚μ λ μ½”λ“)
    

#### π”„ Clustering vs Secondary Index μ°¨μ΄

1. **Clustering Index**:
    
    - λ μ½”λ“λ“¤μ΄ μΈλ±μ¤ μμ„λ€λ΅ **λ¬Όλ¦¬μ μΌλ΅ μ—°μ† λ°°μΉ**λ©λ‹λ‹¤.
        
    - ν•μ§€λ§ μ—¬μ „ν κ° ν¬μΈν„°λ” **κ°λ³„ λ μ½”λ“**λ¥Ό κ°€λ¦¬ν‚µλ‹λ‹¤.
        
2. **Secondary Index**:
    
    - λ μ½”λ“λ“¤μ΄ μΈλ±μ¤ μμ„μ™€ **λ‹¤λ¥΄κ² λ¬Όλ¦¬μ μΌλ΅ λ°°μΉ**λ©λ‹λ‹¤.
        
    - μ—­μ‹ κ° ν¬μΈν„°λ” **κ°λ³„ λ μ½”λ“**λ¥Ό κ°€λ¦¬ν‚µλ‹λ‹¤.
        

#### β μλ»λ μ΄ν•΄ vs. β… μ¬λ°”λ¥Έ μ΄ν•΄

- **μλ»λ μ΄ν•΄**: "ν΄λ¬μ¤ν„°λ§λ λ μ½”λ“ κ·Έλ£Ήμ μ‹μ‘μ "μ„ κ°€λ¦¬ν‚¨λ‹¤.
    
- **μ¬λ°”λ¥Έ μ΄ν•΄**: "κ° search-keyμ— ν•΄λ‹Ήν•λ” μ •ν™•ν• κ°λ³„ λ μ½”λ“μ μ„μΉ"λ¥Ό κ°€λ¦¬ν‚¨λ‹¤.
    

μ¦‰, **B-tree λ…Έλ“μ κ° ν¬μΈν„°λ” ν•­μƒ ν•λ‚μ κµ¬μ²΄μ μΈ λ μ½”λ“λ¥Ό μ§μ ‘ κ°€λ¦¬ν‚¤λ” μ£Όμ†μ…λ‹λ‹¤!**

---

### Questions

1. RDBMSμ—μ„ B-tree μΈλ±μ¤μ λ¦¬ν”„ λ…Έλ“(Leaf Node)μ— μ €μ¥λ ν¬μΈν„°(Pointer)λ” λ¬΄μ—‡μ„ κ°€λ¦¬ν‚¤λ‚μ”?
    
2. ν΄λ¬μ¤ν„°λ§ μΈλ±μ¤(Clustering Index)μ™€ λ³΄μ΅° μΈλ±μ¤(Secondary Index)μ κ°€μ¥ ν° μ°¨μ΄μ μ€ λ μ½”λ“μ λ¬Όλ¦¬μ  μ €μ¥ λ°©μ‹κ³Ό κ΄€λ ¨ν•μ—¬ λ¬΄μ—‡μΈκ°€μ”?
    
3. "μΈλ±μ¤ ν¬μΈν„°λ” ν΄λ¬μ¤ν„°λ§λ λ μ½”λ“ κ·Έλ£Ήμ μ‹μ‘ μ£Όμ†λ¥Ό κ°€λ¦¬ν‚¨λ‹¤"λ” μ„¤λ…μ΄ μ™ λ¶€μ •ν™•ν•μ§€ μ„¤λ…ν•΄ λ³΄μ„Έμ”.